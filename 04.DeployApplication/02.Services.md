# Service 종류 

K8S 에서는 다음과 같이 3가지 종류의 서비스를 제공한다. 

- Loadbalancer: 로드밸런서 서비스를 지정한다. 로드 밸런서를 설정하면, Cloud내에 존재하는 LoadBalancer를 K8S 클러스터에 서비스로 이용한다, 서비스는 우리가 배포한 Pod로 트래픽을 분산 시켜 준다. 
- NodePort: 물리적인 노드의 포트로 서비스를 배포한다. 
- ClusterIP: 이는 클러스터 내부 IP를 서비스로 노출하며, 이를 이용하면 클러스터 내부에서는 자유롭게 접근이 가능하다. 

## LoadBalancer 예제

```go
apiVersion: v1
kind: Service
metadata:
  name: ecsdemo-frontend
spec:
  selector:
    app: ecsdemo-frontend
  type: LoadBalancer
  ports:
   -  protocol: TCP
      port: 80
      targetPort: 3000
```

## cluster ip 로 연동

```go
apiVersion: v1
kind: Service
metadata:
  name: ecsdemo-nodejs
spec:
  selector:
    app: ecsdemo-nodejs
  ports:
   -  protocol: TCP
      port: 80
      targetPort: 3000
```

##  ELB서비스 롤 확인 및 생성 

```go
aws iam get-role --role-name "AWSServiceRoleForElasticLoadBalancing" || aws iam create-service-linked-role --aws-service-name "elasticloadbalancing.amazonaws.com"
```
