# EKS 에서 NodeGroup

EKS에서는 NodeGroup 을 통해서 스케일링을 수행한다. 

## 현재 존재하는 EKS 클러스터 확인하기. 

```shell
eksctl get cluster

2021-06-01 17:06:41 [ℹ]  eksctl version 0.52.0
2021-06-01 17:06:41 [ℹ]  using region ap-northeast-2
NAME                    REGION          EKSCTL CREATED
kido-test-cluster       ap-northeast-2  True
```

위와 같이 우리가 생성한 EKS 클러스터를 확인할 수 있다. 

## NodeGroup 정보 확인하기. 

```shell
eksctl get nodegroup --cluster kido-test-cluster

2021-06-01 17:08:13 [ℹ]  eksctl version 0.52.0
2021-06-01 17:08:13 [ℹ]  using region ap-northeast-2
CLUSTER                 NODEGROUP       STATUS          CREATED                 MIN SIZE        MAX SIZE        DESIRED CAPACITY        INSTANCE TYPEIMAGE ID         ASG NAME
kido-test-cluster       ng-25863b4a     CREATE_COMPLETE 2021-06-01T05:08:19Z    2               4               2                       t2.micro     ami-0fe33b69c98a70bc4    eksctl-kido-test-cluster-nodegroup-ng-25863b4a-NodeGroup-ULB8G5HK8I6J
```

- 현재 클러스터에 생성된 nodegroup 은 ng-25863b4a 라는 것을 확인할 수 있다. 
- 인스턴스 아이디, 노드그룹, 상태, 생성일시, 최소 스케일링, 최대 스케일링, 요구되는 용량, 인스턴스 타입, 이미지아이디, 오토스케일링그룹 이름 등을 확인할 수 있다. 

## nodegroup 에 인스턴스 스케일링 하기. 

```shell
eksctl scale nodegroup --cluster=kido-test-cluster --nodes=3 --name=ng-25863b4a

2021-06-01 17:13:02 [ℹ]  scaling nodegroup "ng-25863b4a" in cluster kido-test-cluster
2021-06-01 17:13:02 [ℹ]  nodegroup successfully scaled
```

위 커맨드를 통해서 현재 노드그룹이 2인것을 3으로 확장할 수 있다. 

확인하기. 

```shell
eksctl get nodegroup --cluster kido-test-cluster                     

2021-06-01 17:13:44 [ℹ]  eksctl version 0.52.0
2021-06-01 17:13:44 [ℹ]  using region ap-northeast-2
CLUSTER                 NODEGROUP       STATUS          CREATED                 MIN SIZE        MAX SIZE        DESIRED CAPACITY        INSTANCE TYPEIMAGE ID         ASG NAME
kido-test-cluster       ng-25863b4a     CREATE_COMPLETE 2021-06-01T05:08:19Z    2               4               3                       t2.micro     ami-0fe33b69c98a70bc4    eksctl-kido-test-cluster-nodegroup-ng-25863b4a-NodeGroup-ULB8G5HK8I6J
```

- Desire가 3개로 변경된 것을 확인할 수 있다. 

## nodegroup 삭제하기. 

```go
eksctl delete nodegroup --name=ng-25863b4a
```